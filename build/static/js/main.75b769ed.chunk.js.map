{"version":3,"sources":["components/Main.js","components/ScrollComponent.jsx","components/CustomHook.js","components/CustomHookEnCapsulado.js","App.js","index.js"],"names":["Main","className","Card","border","bg","to","Button","variant","ScrollComponent","state","photos","loading","page","prevY","this","setState","axios","get","then","res","data","getPhotos","observer","IntersectionObserver","handleObserver","bind","root","rootMargin","threshold","observe","loadingRef","entities","y","boundingClientRect","curPage","length","albumId","loadingTextCSS","display","style","minHeight","map","user","src","url","height","width","ref","margin","Component","SpinnerRender","Spinner","as","animation","size","role","aria-hidden","CustomHook","useState","setLoading","images","setImages","blocks","setBlocks","more","a","fetch_images","more_images","prev","fetch","json","useEffect","picsum","Container","Row","el","i","Col","md","xl","key","Img","download_url","disabled","onClick","CustomHookEnCapsulado","useInfinitePicsum","flexDirection","marginBottom","borderRadius","alt","App","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.75b769ed.chunk.js","sourcesContent":["import React from 'react'\nimport { Button, Card } from 'react-bootstrap'\nimport { Link } from 'react-router-dom'\n\nfunction Main () {\n  return (\n    <div className=\"test\" >\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <h3>Infinite Scroll</h3>\n\n          <div className=\"col-2\">\n            <Card className=\"p-2\" border=\"warning\" bg=\"dark\">\n              <Link to={`/scrollcomponent`}>\n                <Button className=\"mb-2 btn-block\" variant=\"primary\">ScrollComponent </Button>\n              </Link>\n              <Link to={`/customhook`}>\n                <Button className=\"mb-2 btn-block\" variant=\"success\">CustomHook </Button>\n              </Link>\n              <Link to={`/customhookencapsulado`}>\n                <Button className=\"mb-2 btn-block\" variant=\"warning\">CustomHookEnCapsulado </Button>\n              </Link>\n            </Card>\n          </div>\n\n        </header>\n      </div>\n    </div>\n  )\n}\n\nexport default Main","import React, { Component } from 'react'\nimport axios from 'axios'\n\nclass ScrollComponent extends Component {\n  constructor () {\n    super()\n    this.state = {\n      photos: [],\n      loading: false,\n      page: 0,\n      prevY: 0\n    }\n  }\n\n  getPhotos (page) {\n    this.setState({ loading: true })\n    axios\n      .get(\n        `https://jsonplaceholder.typicode.com/photos?_page=${page}&_limit=10`\n      )\n      .then(res => {\n        // console.log(res)\n        this.setState({ photos: [...this.state.photos, ...res.data] })\n        this.setState({ loading: false })\n        // console.log(this.state.photos)\n      })\n  }\n\n  componentDidMount () {\n    this.getPhotos(this.state.page)\n\n    var options = {\n      root: null,\n      rootMargin: '0px',\n      threshold: 1.0\n    }\n\n    this.observer = new IntersectionObserver(\n      this.handleObserver.bind(this),\n      options\n    )\n    this.observer.observe(this.loadingRef)\n  }\n\n  handleObserver (entities, observer) {\n    const y = entities[0].boundingClientRect.y\n    if (this.state.prevY > y) {\n      const lastPhoto = this.state.photos[this.state.photos.length - 1]\n      const curPage = lastPhoto.albumId\n      this.getPhotos(curPage)\n      this.setState({ page: curPage })\n    }\n    this.setState({ prevY: y })\n  }\n\n  render () {\n    // Additional css\n    const loadingCSS = {\n      height: '100px',\n      margin: '30px'\n    }\n\n    // To change the loading icon behavior\n    const loadingTextCSS = { display: this.state.loading ? 'block' : 'none' }\n\n    return (\n      <div className='container'>\n        <div style={{ minHeight: '800px' }}>\n          {this.state.photos.map(user =>\n            <img src={user.url} height='200px' width='200px' />\n          )}\n        </div>\n        <div\n          ref={loadingRef => (this.loadingRef = loadingRef)}\n          style={loadingCSS}\n        >\n          <span style={loadingTextCSS}>Loading...</span>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default ScrollComponent\n","import React, { useState, useEffect } from 'react'\nimport { Container, Row, Col, Button, Card, Spinner } from 'react-bootstrap'\n\n\nfunction SpinnerRender () {\n  return (\n    <div>\n      <Spinner\n        as=\"span\"\n        animation=\"border\"\n        size=\"sm\"\n        role=\"status\"\n        aria-hidden=\"true\"\n      />\n    </div>\n  )\n}\n\n\nexport default function CustomHook () {\n\n  const [loading, setLoading] = useState(true)\n  const [images, setImages] = useState([])\n  const [blocks, setBlocks] = useState(1)\n\n  const more = async () => {\n    setLoading(true)\n    const more_images = await fetch_images(blocks + 1)\n    setBlocks(prev => prev + 1)\n    setImages(prev => [...prev, ...more_images])\n    setLoading(false)\n  }\n\n  const fetch_images = async page => (await fetch(`https://picsum.photos/v2/list?page=${page}&limit=10`)).json()\n\n  useEffect(() => {\n    ; (async () => {\n      const picsum = await fetch_images(0)\n      setImages(picsum)\n      setLoading(false)\n    })()\n\n  }, [])\n\n  return (\n    <header className=\"App\">\n\n      <Container>\n        <Row className=\"\" >\n          {/* {Array.from({ length: 10 }).map((_, idx) => ( */}\n          {images.map((el, i) => (\n\n            <Col className=\"mt-3\" md=\"auto\" xl=\"4\" key={`img${i}`}>\n              <Card style={{ width: '20rem' }}>\n                <Card.Img className=\"card-img\" variant=\"top\" src={el.download_url} />\n\n              </Card>\n            </Col>\n\n          ))}\n        </Row>\n      </Container>\n      <Col className=\"py-3 col-2 mx-auto \">\n        <Button\n          className=\"btn-block\"\n          // size=\"lg\"\n          disabled={loading}\n          onClick={more}\n          variant=\"success\">\n          {/* Mas imagenes */}\n          {loading ? <SpinnerRender /> : 'Mas imagenes'}\n          {/* <SpinnerRender /> */}\n        </Button>\n      </Col>\n\n    </header>\n  )\n}","import React, { useState, useEffect } from 'react'\n\nexport default function CustomHookEnCapsulado () {\n  const [images, more] = useInfinitePicsum() // mi hook\n\n  return (\n    <div className=\"App\">\n      <div style={{ display: 'flex', flexDirection: 'column' }}>\n        {images.map((el, i) => (\n          <img\n            key={`img${i}`}\n            src={el.download_url}\n            style={{\n              width: '350px',\n              height: 'auto',\n              marginBottom: '10px',\n              borderRadius: '3px',\n            }}\n            alt=\"\"\n          />\n        ))}\n      </div>\n      <button style={{ marginBottom: '100px' }} onClick={more}>\n        mas imagenes\n      </button>\n    </div>\n  )\n}\n\nconst useInfinitePicsum = () => {\n  // estado para almacenar las imágenes\n  const [images, setImages] = useState([])\n  // estado para contar el número de bloques que pido, lo necesito para que picsum no me devuelva siempre las mismas imágenes\n  const [blocks, setBlocks] = useState(1)\n\n  // función para pedir más imágenes\n  const more = async () => {\n    const more_images = await fetch_images(blocks + 1)\n    setBlocks(prev => prev + 1)\n    setImages(prev => [...prev, ...more_images])\n  }\n\n  // función para pedir (esta vez literalmente) las imagenes a picsum\n  const fetch_images = async page => (await fetch(`https://picsum.photos/v2/list?page=${page}&limit=10`)).json()\n\n  // useEffect para ejecutar al principio la primera \"pedida\" de imágenes\n  useEffect(() => {\n    ; (async () => {\n      const picsum = await fetch_images(0)\n      setImages(picsum)\n    })()\n  }, [])\n\n  return [images, more]\n}","import React from 'react'\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport Main from './components/Main'\nimport ScrollComponent from './components/ScrollComponent'\nimport CustomHook from './components/CustomHook';\nimport CustomHookEnCapsulado from './components/CustomHookEnCapsulado';\n\n\nfunction App () {\n  return (\n    <BrowserRouter>\n      <Routes>\n        <>\n          <Route path='/' element={<Main />} />\n          <Route path='/scrollcomponent' element={<ScrollComponent />} />\n          <Route path='/scrollcomponent' element={<ScrollComponent />} />\n          <Route path='/customhook' element={<CustomHook />} />\n          <Route path='/customhookencapsulado' element={<CustomHookEnCapsulado />} />\n\n        </>\n      </Routes>\n    </BrowserRouter>\n  )\n\n\n}\n\n\n\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}